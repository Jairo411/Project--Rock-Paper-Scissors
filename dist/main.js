(()=>{var t={368:(t,s,e)=>{const r=e(498);s.gameObject=class{constructor(t,s){this.id=t,this.Image=s,this.transform=new r.Matrix3,this.x=0,this.y=0,this.transform.set(0,0,this.x,0,0,this.y,0,0,0)}DrawSprite0(){context.drawImage(CanvasImageSource_,x_source,y_source,w_source,h_source,x_destination,y_destination,w_destination,h_destination)}DrawSprite1(t,s,i){context.drawImage(t,s,i)}},s.UI_Square=class{constructor(t,s,i,e,r,h){this.x=t,this.y=s,this.width=i,this.height=e,this.offSetX=r,this.offSetY=h}DrawUISquare(){context.fillRect(UI_square.x,UI_square.y,UI_square.width,UI_square.height),context.clearRect(UI_square.x+5,UI_square.y+5,UI_square.width-10,UI_square.height-10)}collisionDectection(){let t=[point.x,point.y],s=[align_bounding_box.minX,align_bounding_box.minY,align_bounding_box.maxX,align_bounding_box.maxY],e=[0,0];for(i=0;i<2;i++){let r=t[i];r<s.minX?r=s.minX:r<s.minY&&(r=s.minY),r>s.maxX?r=s.maxX:r>s.maxY&&(r=s.maxY),e[i]=r}}ReturnBoundingBox(){}},s.threeJsMod=r},498:(t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});const i="srgb",e="srgb-linear";class r{constructor(t=0,s=0){r.prototype.isVector2=!0,this.x=t,this.y=s}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,s){return this.x=t,this.y=s,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const s=this.x,i=this.y,e=t.elements;return this.x=e[0]*s+e[3]*i+e[6],this.y=e[1]*s+e[4]*i+e[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this}clampLength(t,s){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(s,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const s=this.x-t.x,i=this.y-t.y;return s*s+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this}lerpVectors(t,s,i){return this.x=t.x+(s.x-t.x)*i,this.y=t.y+(s.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t}rotateAround(t,s){const i=Math.cos(s),e=Math.sin(s),r=this.x-t.x,h=this.y-t.y;return this.x=r*i-h*e+t.x,this.y=r*e+h*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}const h=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let n=1234567;const a=Math.PI/180,o=180/Math.PI;function c(t,s,i){return Math.max(s,Math.min(i,t))}function l(t,s){return(t%s+s)%s}function u(t,s,i){return(1-i)*t+i*s}var m=Object.freeze({__proto__:null,DEG2RAD:a,RAD2DEG:o,generateUUID:function(){const t=4294967295*Math.random()|0,s=4294967295*Math.random()|0,i=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(h[255&t]+h[t>>8&255]+h[t>>16&255]+h[t>>24&255]+"-"+h[255&s]+h[s>>8&255]+"-"+h[s>>16&15|64]+h[s>>24&255]+"-"+h[63&i|128]+h[i>>8&255]+"-"+h[i>>16&255]+h[i>>24&255]+h[255&e]+h[e>>8&255]+h[e>>16&255]+h[e>>24&255]).toLowerCase()},clamp:c,euclideanModulo:l,mapLinear:function(t,s,i,e,r){return e+(t-s)*(r-e)/(i-s)},inverseLerp:function(t,s,i){return t!==s?(i-t)/(s-t):0},lerp:u,damp:function(t,s,i,e){return u(t,s,1-Math.exp(-i*e))},pingpong:function(t,s=1){return s-Math.abs(l(t,2*s)-s)},smoothstep:function(t,s,i){return t<=s?0:t>=i?1:(t=(t-s)/(i-s))*t*(3-2*t)},smootherstep:function(t,s,i){return t<=s?0:t>=i?1:(t=(t-s)/(i-s))*t*t*(t*(6*t-15)+10)},randInt:function(t,s){return t+Math.floor(Math.random()*(s-t+1))},randFloat:function(t,s){return t+Math.random()*(s-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){void 0!==t&&(n=t);let s=n+=1831565813;return s=Math.imul(s^s>>>15,1|s),s^=s+Math.imul(s^s>>>7,61|s),((s^s>>>14)>>>0)/4294967296},degToRad:function(t){return t*a},radToDeg:function(t){return t*o},isPowerOfTwo:function(t){return!(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,s,i,e,r){const h=Math.cos,n=Math.sin,a=h(i/2),o=n(i/2),c=h((s+e)/2),l=n((s+e)/2),u=h((s-e)/2),m=n((s-e)/2),y=h((e-s)/2),x=n((e-s)/2);switch(r){case"XYX":t.set(a*l,o*u,o*m,a*c);break;case"YZY":t.set(o*m,a*l,o*u,a*c);break;case"ZXZ":t.set(o*u,o*m,a*l,a*c);break;case"XZX":t.set(a*l,o*x,o*y,a*c);break;case"YXY":t.set(o*y,a*l,o*x,a*c);break;case"ZYZ":t.set(o*x,o*y,a*l,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:function(t,s){switch(s.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}},denormalize:function(t,s){switch(s.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}});class y{constructor(t=0,s=0,i=0,e=1){this.isQuaternion=!0,this._x=t,this._y=s,this._z=i,this._w=e}static slerpFlat(t,s,i,e,r,h,n){let a=i[e+0],o=i[e+1],c=i[e+2],l=i[e+3];const u=r[h+0],m=r[h+1],y=r[h+2],x=r[h+3];if(0===n)return t[s+0]=a,t[s+1]=o,t[s+2]=c,void(t[s+3]=l);if(1===n)return t[s+0]=u,t[s+1]=m,t[s+2]=y,void(t[s+3]=x);if(l!==x||a!==u||o!==m||c!==y){let t=1-n;const s=a*u+o*m+c*y+l*x,i=s>=0?1:-1,e=1-s*s;if(e>Number.EPSILON){const r=Math.sqrt(e),h=Math.atan2(r,s*i);t=Math.sin(t*h)/r,n=Math.sin(n*h)/r}const r=n*i;if(a=a*t+u*r,o=o*t+m*r,c=c*t+y*r,l=l*t+x*r,t===1-n){const t=1/Math.sqrt(a*a+o*o+c*c+l*l);a*=t,o*=t,c*=t,l*=t}}t[s]=a,t[s+1]=o,t[s+2]=c,t[s+3]=l}static multiplyQuaternionsFlat(t,s,i,e,r,h){const n=i[e],a=i[e+1],o=i[e+2],c=i[e+3],l=r[h],u=r[h+1],m=r[h+2],y=r[h+3];return t[s]=n*y+c*l+a*m-o*u,t[s+1]=a*y+c*u+o*l-n*m,t[s+2]=o*y+c*m+n*u-a*l,t[s+3]=c*y-n*l-a*u-o*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,s,i,e){return this._x=t,this._y=s,this._z=i,this._w=e,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,s){const i=t._x,e=t._y,r=t._z,h=t._order,n=Math.cos,a=Math.sin,o=n(i/2),c=n(e/2),l=n(r/2),u=a(i/2),m=a(e/2),y=a(r/2);switch(h){case"XYZ":this._x=u*c*l+o*m*y,this._y=o*m*l-u*c*y,this._z=o*c*y+u*m*l,this._w=o*c*l-u*m*y;break;case"YXZ":this._x=u*c*l+o*m*y,this._y=o*m*l-u*c*y,this._z=o*c*y-u*m*l,this._w=o*c*l+u*m*y;break;case"ZXY":this._x=u*c*l-o*m*y,this._y=o*m*l+u*c*y,this._z=o*c*y+u*m*l,this._w=o*c*l-u*m*y;break;case"ZYX":this._x=u*c*l-o*m*y,this._y=o*m*l+u*c*y,this._z=o*c*y-u*m*l,this._w=o*c*l+u*m*y;break;case"YZX":this._x=u*c*l+o*m*y,this._y=o*m*l+u*c*y,this._z=o*c*y-u*m*l,this._w=o*c*l-u*m*y;break;case"XZY":this._x=u*c*l-o*m*y,this._y=o*m*l-u*c*y,this._z=o*c*y+u*m*l,this._w=o*c*l+u*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==s&&this._onChangeCallback(),this}setFromAxisAngle(t,s){const i=s/2,e=Math.sin(i);return this._x=t.x*e,this._y=t.y*e,this._z=t.z*e,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const s=t.elements,i=s[0],e=s[4],r=s[8],h=s[1],n=s[5],a=s[9],o=s[2],c=s[6],l=s[10],u=i+n+l;if(u>0){const t=.5/Math.sqrt(u+1);this._w=.25/t,this._x=(c-a)*t,this._y=(r-o)*t,this._z=(h-e)*t}else if(i>n&&i>l){const t=2*Math.sqrt(1+i-n-l);this._w=(c-a)/t,this._x=.25*t,this._y=(e+h)/t,this._z=(r+o)/t}else if(n>l){const t=2*Math.sqrt(1+n-i-l);this._w=(r-o)/t,this._x=(e+h)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+l-i-n);this._w=(h-e)/t,this._x=(r+o)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,s){let i=t.dot(s)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*s.z-t.z*s.y,this._y=t.z*s.x-t.x*s.z,this._z=t.x*s.y-t.y*s.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(c(this.dot(t),-1,1)))}rotateTowards(t,s){const i=this.angleTo(t);if(0===i)return this;const e=Math.min(1,s/i);return this.slerp(t,e),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,s){const i=t._x,e=t._y,r=t._z,h=t._w,n=s._x,a=s._y,o=s._z,c=s._w;return this._x=i*c+h*n+e*o-r*a,this._y=e*c+h*a+r*n-i*o,this._z=r*c+h*o+i*a-e*n,this._w=h*c-i*n-e*a-r*o,this._onChangeCallback(),this}slerp(t,s){if(0===s)return this;if(1===s)return this.copy(t);const i=this._x,e=this._y,r=this._z,h=this._w;let n=h*t._w+i*t._x+e*t._y+r*t._z;if(n<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,n=-n):this.copy(t),n>=1)return this._w=h,this._x=i,this._y=e,this._z=r,this;const a=1-n*n;if(a<=Number.EPSILON){const t=1-s;return this._w=t*h+s*this._w,this._x=t*i+s*this._x,this._y=t*e+s*this._y,this._z=t*r+s*this._z,this.normalize(),this._onChangeCallback(),this}const o=Math.sqrt(a),c=Math.atan2(o,n),l=Math.sin((1-s)*c)/o,u=Math.sin(s*c)/o;return this._w=h*l+this._w*u,this._x=i*l+this._x*u,this._y=e*l+this._y*u,this._z=r*l+this._z*u,this._onChangeCallback(),this}slerpQuaternions(t,s,i){return this.copy(t).slerp(s,i)}random(){const t=Math.random(),s=Math.sqrt(1-t),i=Math.sqrt(t),e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(s*Math.cos(e),i*Math.sin(r),i*Math.cos(r),s*Math.sin(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,s=0){return this._x=t[s],this._y=t[s+1],this._z=t[s+2],this._w=t[s+3],this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._w,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class x{constructor(t=0,s=0,i=0){x.prototype.isVector3=!0,this.x=t,this.y=s,this.z=i}set(t,s,i){return void 0===i&&(i=this.z),this.x=t,this.y=s,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this.z=t.z+s.z,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,s){return this.x=t.x*s.x,this.y=t.y*s.y,this.z=t.z*s.z,this}applyEuler(t){return this.applyQuaternion(p.setFromEuler(t))}applyAxisAngle(t,s){return this.applyQuaternion(p.setFromAxisAngle(t,s))}applyMatrix3(t){const s=this.x,i=this.y,e=this.z,r=t.elements;return this.x=r[0]*s+r[3]*i+r[6]*e,this.y=r[1]*s+r[4]*i+r[7]*e,this.z=r[2]*s+r[5]*i+r[8]*e,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const s=this.x,i=this.y,e=this.z,r=t.elements,h=1/(r[3]*s+r[7]*i+r[11]*e+r[15]);return this.x=(r[0]*s+r[4]*i+r[8]*e+r[12])*h,this.y=(r[1]*s+r[5]*i+r[9]*e+r[13])*h,this.z=(r[2]*s+r[6]*i+r[10]*e+r[14])*h,this}applyQuaternion(t){const s=this.x,i=this.y,e=this.z,r=t.x,h=t.y,n=t.z,a=t.w,o=a*s+h*e-n*i,c=a*i+n*s-r*e,l=a*e+r*i-h*s,u=-r*s-h*i-n*e;return this.x=o*a+u*-r+c*-n-l*-h,this.y=c*a+u*-h+l*-r-o*-n,this.z=l*a+u*-n+o*-h-c*-r,this}transformDirection(t){const s=this.x,i=this.y,e=this.z,r=t.elements;return this.x=r[0]*s+r[4]*i+r[8]*e,this.y=r[1]*s+r[5]*i+r[9]*e,this.z=r[2]*s+r[6]*i+r[10]*e,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this.z=Math.max(t.z,Math.min(s.z,this.z)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this.z=Math.max(t,Math.min(s,this.z)),this}clampLength(t,s){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(s,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this.z+=(t.z-this.z)*s,this}lerpVectors(t,s,i){return this.x=t.x+(s.x-t.x)*i,this.y=t.y+(s.y-t.y)*i,this.z=t.z+(s.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,s){const i=t.x,e=t.y,r=t.z,h=s.x,n=s.y,a=s.z;return this.x=e*a-r*n,this.y=r*h-i*a,this.z=i*n-e*h,this}projectOnVector(t){const s=t.lengthSq();if(0===s)return this.set(0,0,0);const i=t.dot(this)/s;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return d.copy(this).projectOnVector(t),this.sub(d)}reflect(t){return this.sub(d.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const s=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===s)return Math.PI/2;const i=this.dot(t)/s;return Math.acos(c(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const s=this.x-t.x,i=this.y-t.y,e=this.z-t.z;return s*s+i*i+e*e}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,s,i){const e=Math.sin(s)*t;return this.x=e*Math.sin(i),this.y=Math.cos(s)*t,this.z=e*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,s,i){return this.x=t*Math.sin(s),this.y=i,this.z=t*Math.cos(s),this}setFromMatrixPosition(t){const s=t.elements;return this.x=s[12],this.y=s[13],this.z=s[14],this}setFromMatrixScale(t){const s=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),e=this.setFromMatrixColumn(t,2).length();return this.x=s,this.y=i,this.z=e,this}setFromMatrixColumn(t,s){return this.fromArray(t.elements,4*s)}setFromMatrix3Column(t,s){return this.fromArray(t.elements,3*s)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this.z=t[s+2],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t[s+2]=this.z,t}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),s=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(s),this.y=i*Math.sin(s),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const d=new x,p=new y,g=new r;class M{constructor(t=new x(1/0,1/0,1/0),s=new x(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=s}set(t,s){return this.min.copy(t),this.max.copy(s),this}setFromArray(t){let s=1/0,i=1/0,e=1/0,r=-1/0,h=-1/0,n=-1/0;for(let a=0,o=t.length;a<o;a+=3){const o=t[a],c=t[a+1],l=t[a+2];o<s&&(s=o),c<i&&(i=c),l<e&&(e=l),o>r&&(r=o),c>h&&(h=c),l>n&&(n=l)}return this.min.set(s,i,e),this.max.set(r,h,n),this}setFromPoints(t){this.makeEmpty();for(let s=0,i=t.length;s<i;s++)this.expandByPoint(t[s]);return this}setFromCenterAndSize(t,s){const i=w.copy(s).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,s=!1){return this.makeEmpty(),this.expandByObject(t,s)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t=new x){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t=new x){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,s){return s.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,w),w.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let s,i;return t.normal.x>0?(s=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(s=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(s+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(s+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(s+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(s+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),s<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(k),T.subVectors(this.max,k),z.subVectors(t.a,k),b.subVectors(t.b,k),S.subVectors(t.c,k),f.subVectors(b,z),C.subVectors(S,b),F.subVectors(z,S);let s=[0,-f.z,f.y,0,-C.z,C.y,0,-F.z,F.y,f.z,0,-f.x,C.z,0,-C.x,F.z,0,-F.x,-f.y,f.x,0,-C.y,C.x,0,-F.y,F.x,0];return!!P(s,z,b,S,T)&&(s=[1,0,0,0,1,0,0,0,1],!!P(s,z,b,S,T)&&(A.crossVectors(f,C),s=[A.x,A.y,A.z],P(s,z,b,S,T)))}clampPoint(t,s){return s.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return w.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(w).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(_)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const _=[new x,new x,new x,new x,new x,new x,new x,new x],w=new x,z=new x,b=new x,S=new x,f=new x,C=new x,F=new x,k=new x,T=new x,A=new x,q=new x;function P(t,s,i,e,r){for(let h=0,n=t.length-3;h<=n;h+=3){q.fromArray(t,h);const n=r.x*Math.abs(q.x)+r.y*Math.abs(q.y)+r.z*Math.abs(q.z),a=s.dot(q),o=i.dot(q),c=e.dot(q);if(Math.max(-Math.max(a,o,c),Math.min(a,o,c))>n)return!1}return!0}function V(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function B(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}const R={[i]:{[e]:V},[e]:{[i]:B}},E={legacyMode:!0,get workingColorSpace(){return e},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,s,i){if(this.legacyMode||s===i||!s||!i)return t;if(R[s]&&void 0!==R[s][i]){const e=R[s][i];return t.r=e(t.r),t.g=e(t.g),t.b=e(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,s){return this.convert(t,this.workingColorSpace,s)},toWorkingColorSpace:function(t,s){return this.convert(t,s,this.workingColorSpace)}},I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},v={r:0,g:0,b:0},L={h:0,s:0,l:0},D={h:0,s:0,l:0};function G(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+6*(s-t)*(2/3-i):t}function O(t,s){return s.r=t.r,s.g=t.g,s.b=t.b,s}class U{constructor(t,s,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===s&&void 0===i?this.set(t):this.setRGB(t,s,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,s=i){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,E.toWorkingColorSpace(this,s),this}setRGB(t,s,i,e=E.workingColorSpace){return this.r=t,this.g=s,this.b=i,E.toWorkingColorSpace(this,e),this}setHSL(t,s,i,e=E.workingColorSpace){if(t=l(t,1),s=c(s,0,1),i=c(i,0,1),0===s)this.r=this.g=this.b=i;else{const e=i<=.5?i*(1+s):i+s-i*s,r=2*i-e;this.r=G(r,e,t+1/3),this.g=G(r,e,t),this.b=G(r,e,t-1/3)}return E.toWorkingColorSpace(this,e),this}setStyle(t,s=i){function e(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=r[1],h=r[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,E.toWorkingColorSpace(this,s),e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,E.toWorkingColorSpace(this,s),e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h)){const i=parseFloat(t[1])/360,r=parseFloat(t[2])/100,h=parseFloat(t[3])/100;return e(t[4]),this.setHSL(i,r,h,s)}}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=r[1],i=t.length;if(3===i)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,E.toWorkingColorSpace(this,s),this;if(6===i)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,E.toWorkingColorSpace(this,s),this}return t&&t.length>0?this.setColorName(t,s):this}setColorName(t,s=i){const e=I[t.toLowerCase()];return void 0!==e?this.setHex(e,s):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=V(t.r),this.g=V(t.g),this.b=V(t.b),this}copyLinearToSRGB(t){return this.r=B(t.r),this.g=B(t.g),this.b=B(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=i){return E.fromWorkingColorSpace(O(this,v),t),c(255*v.r,0,255)<<16^c(255*v.g,0,255)<<8^c(255*v.b,0,255)}getHexString(t=i){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,s=E.workingColorSpace){E.fromWorkingColorSpace(O(this,v),s);const i=v.r,e=v.g,r=v.b,h=Math.max(i,e,r),n=Math.min(i,e,r);let a,o;const c=(n+h)/2;if(n===h)a=0,o=0;else{const t=h-n;switch(o=c<=.5?t/(h+n):t/(2-h-n),h){case i:a=(e-r)/t+(e<r?6:0);break;case e:a=(r-i)/t+2;break;case r:a=(i-e)/t+4}a/=6}return t.h=a,t.s=o,t.l=c,t}getRGB(t,s=E.workingColorSpace){return E.fromWorkingColorSpace(O(this,v),s),t.r=v.r,t.g=v.g,t.b=v.b,t}getStyle(t=i){return E.fromWorkingColorSpace(O(this,v),t),t!==i?`color(${t} ${v.r} ${v.g} ${v.b})`:`rgb(${255*v.r|0},${255*v.g|0},${255*v.b|0})`}offsetHSL(t,s,i){return this.getHSL(L),L.h+=t,L.s+=s,L.l+=i,this.setHSL(L.h,L.s,L.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,s){return this.r=t.r+s.r,this.g=t.g+s.g,this.b=t.b+s.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,s){return this.r+=(t.r-this.r)*s,this.g+=(t.g-this.g)*s,this.b+=(t.b-this.b)*s,this}lerpColors(t,s,i){return this.r=t.r+(s.r-t.r)*i,this.g=t.g+(s.g-t.g)*i,this.b=t.b+(s.b-t.b)*i,this}lerpHSL(t,s){this.getHSL(L),t.getHSL(D);const i=u(L.h,D.h,s),e=u(L.s,D.s,s),r=u(L.l,D.l,s);return this.setHSL(i,e,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,s=0){return this.r=t[s],this.g=t[s+1],this.b=t[s+2],this}toArray(t=[],s=0){return t[s]=this.r,t[s+1]=this.g,t[s+2]=this.b,t}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}U.NAMES=I;class X{constructor(){X.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,s,i,e,r,h,n,a,o,c,l,u,m,y,x,d){const p=this.elements;return p[0]=t,p[4]=s,p[8]=i,p[12]=e,p[1]=r,p[5]=h,p[9]=n,p[13]=a,p[2]=o,p[6]=c,p[10]=l,p[14]=u,p[3]=m,p[7]=y,p[11]=x,p[15]=d,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new X).fromArray(this.elements)}copy(t){const s=this.elements,i=t.elements;return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],this}copyPosition(t){const s=this.elements,i=t.elements;return s[12]=i[12],s[13]=i[13],s[14]=i[14],this}setFromMatrix3(t){const s=t.elements;return this.set(s[0],s[3],s[6],0,s[1],s[4],s[7],0,s[2],s[5],s[8],0,0,0,0,1),this}extractBasis(t,s,i){return t.setFromMatrixColumn(this,0),s.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,s,i){return this.set(t.x,s.x,i.x,0,t.y,s.y,i.y,0,t.z,s.z,i.z,0,0,0,0,1),this}extractRotation(t){const s=this.elements,i=t.elements,e=1/Y.setFromMatrixColumn(t,0).length(),r=1/Y.setFromMatrixColumn(t,1).length(),h=1/Y.setFromMatrixColumn(t,2).length();return s[0]=i[0]*e,s[1]=i[1]*e,s[2]=i[2]*e,s[3]=0,s[4]=i[4]*r,s[5]=i[5]*r,s[6]=i[6]*r,s[7]=0,s[8]=i[8]*h,s[9]=i[9]*h,s[10]=i[10]*h,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromEuler(t){const s=this.elements,i=t.x,e=t.y,r=t.z,h=Math.cos(i),n=Math.sin(i),a=Math.cos(e),o=Math.sin(e),c=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){const t=h*c,i=h*l,e=n*c,r=n*l;s[0]=a*c,s[4]=-a*l,s[8]=o,s[1]=i+e*o,s[5]=t-r*o,s[9]=-n*a,s[2]=r-t*o,s[6]=e+i*o,s[10]=h*a}else if("YXZ"===t.order){const t=a*c,i=a*l,e=o*c,r=o*l;s[0]=t+r*n,s[4]=e*n-i,s[8]=h*o,s[1]=h*l,s[5]=h*c,s[9]=-n,s[2]=i*n-e,s[6]=r+t*n,s[10]=h*a}else if("ZXY"===t.order){const t=a*c,i=a*l,e=o*c,r=o*l;s[0]=t-r*n,s[4]=-h*l,s[8]=e+i*n,s[1]=i+e*n,s[5]=h*c,s[9]=r-t*n,s[2]=-h*o,s[6]=n,s[10]=h*a}else if("ZYX"===t.order){const t=h*c,i=h*l,e=n*c,r=n*l;s[0]=a*c,s[4]=e*o-i,s[8]=t*o+r,s[1]=a*l,s[5]=r*o+t,s[9]=i*o-e,s[2]=-o,s[6]=n*a,s[10]=h*a}else if("YZX"===t.order){const t=h*a,i=h*o,e=n*a,r=n*o;s[0]=a*c,s[4]=r-t*l,s[8]=e*l+i,s[1]=l,s[5]=h*c,s[9]=-n*c,s[2]=-o*c,s[6]=i*l+e,s[10]=t-r*l}else if("XZY"===t.order){const t=h*a,i=h*o,e=n*a,r=n*o;s[0]=a*c,s[4]=-l,s[8]=o*c,s[1]=t*l+r,s[5]=h*c,s[9]=i*l-e,s[2]=e*l-i,s[6]=n*c,s[10]=r*l+t}return s[3]=0,s[7]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Z,t,H)}lookAt(t,s,i){const e=this.elements;return Q.subVectors(t,s),0===Q.lengthSq()&&(Q.z=1),Q.normalize(),W.crossVectors(i,Q),0===W.lengthSq()&&(1===Math.abs(i.z)?Q.x+=1e-4:Q.z+=1e-4,Q.normalize(),W.crossVectors(i,Q)),W.normalize(),j.crossVectors(Q,W),e[0]=W.x,e[4]=j.x,e[8]=Q.x,e[1]=W.y,e[5]=j.y,e[9]=Q.y,e[2]=W.z,e[6]=j.z,e[10]=Q.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,s){const i=t.elements,e=s.elements,r=this.elements,h=i[0],n=i[4],a=i[8],o=i[12],c=i[1],l=i[5],u=i[9],m=i[13],y=i[2],x=i[6],d=i[10],p=i[14],g=i[3],M=i[7],_=i[11],w=i[15],z=e[0],b=e[4],S=e[8],f=e[12],C=e[1],F=e[5],k=e[9],T=e[13],A=e[2],q=e[6],P=e[10],V=e[14],B=e[3],R=e[7],E=e[11],I=e[15];return r[0]=h*z+n*C+a*A+o*B,r[4]=h*b+n*F+a*q+o*R,r[8]=h*S+n*k+a*P+o*E,r[12]=h*f+n*T+a*V+o*I,r[1]=c*z+l*C+u*A+m*B,r[5]=c*b+l*F+u*q+m*R,r[9]=c*S+l*k+u*P+m*E,r[13]=c*f+l*T+u*V+m*I,r[2]=y*z+x*C+d*A+p*B,r[6]=y*b+x*F+d*q+p*R,r[10]=y*S+x*k+d*P+p*E,r[14]=y*f+x*T+d*V+p*I,r[3]=g*z+M*C+_*A+w*B,r[7]=g*b+M*F+_*q+w*R,r[11]=g*S+M*k+_*P+w*E,r[15]=g*f+M*T+_*V+w*I,this}multiplyScalar(t){const s=this.elements;return s[0]*=t,s[4]*=t,s[8]*=t,s[12]*=t,s[1]*=t,s[5]*=t,s[9]*=t,s[13]*=t,s[2]*=t,s[6]*=t,s[10]*=t,s[14]*=t,s[3]*=t,s[7]*=t,s[11]*=t,s[15]*=t,this}determinant(){const t=this.elements,s=t[0],i=t[4],e=t[8],r=t[12],h=t[1],n=t[5],a=t[9],o=t[13],c=t[2],l=t[6],u=t[10],m=t[14];return t[3]*(+r*a*l-e*o*l-r*n*u+i*o*u+e*n*m-i*a*m)+t[7]*(+s*a*m-s*o*u+r*h*u-e*h*m+e*o*c-r*a*c)+t[11]*(+s*o*l-s*n*m-r*h*l+i*h*m+r*n*c-i*o*c)+t[15]*(-e*n*c-s*a*l+s*n*u+e*h*l-i*h*u+i*a*c)}transpose(){const t=this.elements;let s;return s=t[1],t[1]=t[4],t[4]=s,s=t[2],t[2]=t[8],t[8]=s,s=t[6],t[6]=t[9],t[9]=s,s=t[3],t[3]=t[12],t[12]=s,s=t[7],t[7]=t[13],t[13]=s,s=t[11],t[11]=t[14],t[14]=s,this}setPosition(t,s,i){const e=this.elements;return t.isVector3?(e[12]=t.x,e[13]=t.y,e[14]=t.z):(e[12]=t,e[13]=s,e[14]=i),this}invert(){const t=this.elements,s=t[0],i=t[1],e=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],c=t[8],l=t[9],u=t[10],m=t[11],y=t[12],x=t[13],d=t[14],p=t[15],g=l*d*o-x*u*o+x*a*m-n*d*m-l*a*p+n*u*p,M=y*u*o-c*d*o-y*a*m+h*d*m+c*a*p-h*u*p,_=c*x*o-y*l*o+y*n*m-h*x*m-c*n*p+h*l*p,w=y*l*a-c*x*a-y*n*u+h*x*u+c*n*d-h*l*d,z=s*g+i*M+e*_+r*w;if(0===z)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/z;return t[0]=g*b,t[1]=(x*u*r-l*d*r-x*e*m+i*d*m+l*e*p-i*u*p)*b,t[2]=(n*d*r-x*a*r+x*e*o-i*d*o-n*e*p+i*a*p)*b,t[3]=(l*a*r-n*u*r-l*e*o+i*u*o+n*e*m-i*a*m)*b,t[4]=M*b,t[5]=(c*d*r-y*u*r+y*e*m-s*d*m-c*e*p+s*u*p)*b,t[6]=(y*a*r-h*d*r-y*e*o+s*d*o+h*e*p-s*a*p)*b,t[7]=(h*u*r-c*a*r+c*e*o-s*u*o-h*e*m+s*a*m)*b,t[8]=_*b,t[9]=(y*l*r-c*x*r-y*i*m+s*x*m+c*i*p-s*l*p)*b,t[10]=(h*x*r-y*n*r+y*i*o-s*x*o-h*i*p+s*n*p)*b,t[11]=(c*n*r-h*l*r-c*i*o+s*l*o+h*i*m-s*n*m)*b,t[12]=w*b,t[13]=(c*x*e-y*l*e+y*i*u-s*x*u-c*i*d+s*l*d)*b,t[14]=(y*n*e-h*x*e-y*i*a+s*x*a+h*i*d-s*n*d)*b,t[15]=(h*l*e-c*n*e+c*i*a-s*l*a-h*i*u+s*n*u)*b,this}scale(t){const s=this.elements,i=t.x,e=t.y,r=t.z;return s[0]*=i,s[4]*=e,s[8]*=r,s[1]*=i,s[5]*=e,s[9]*=r,s[2]*=i,s[6]*=e,s[10]*=r,s[3]*=i,s[7]*=e,s[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,s=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],e=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(s,i,e))}makeTranslation(t,s,i){return this.set(1,0,0,t,0,1,0,s,0,0,1,i,0,0,0,1),this}makeRotationX(t){const s=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,s,-i,0,0,i,s,0,0,0,0,1),this}makeRotationY(t){const s=Math.cos(t),i=Math.sin(t);return this.set(s,0,i,0,0,1,0,0,-i,0,s,0,0,0,0,1),this}makeRotationZ(t){const s=Math.cos(t),i=Math.sin(t);return this.set(s,-i,0,0,i,s,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,s){const i=Math.cos(s),e=Math.sin(s),r=1-i,h=t.x,n=t.y,a=t.z,o=r*h,c=r*n;return this.set(o*h+i,o*n-e*a,o*a+e*n,0,o*n+e*a,c*n+i,c*a-e*h,0,o*a-e*n,c*a+e*h,r*a*a+i,0,0,0,0,1),this}makeScale(t,s,i){return this.set(t,0,0,0,0,s,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,s,i,e,r,h){return this.set(1,i,r,0,t,1,h,0,s,e,1,0,0,0,0,1),this}compose(t,s,i){const e=this.elements,r=s._x,h=s._y,n=s._z,a=s._w,o=r+r,c=h+h,l=n+n,u=r*o,m=r*c,y=r*l,x=h*c,d=h*l,p=n*l,g=a*o,M=a*c,_=a*l,w=i.x,z=i.y,b=i.z;return e[0]=(1-(x+p))*w,e[1]=(m+_)*w,e[2]=(y-M)*w,e[3]=0,e[4]=(m-_)*z,e[5]=(1-(u+p))*z,e[6]=(d+g)*z,e[7]=0,e[8]=(y+M)*b,e[9]=(d-g)*b,e[10]=(1-(u+x))*b,e[11]=0,e[12]=t.x,e[13]=t.y,e[14]=t.z,e[15]=1,this}decompose(t,s,i){const e=this.elements;let r=Y.set(e[0],e[1],e[2]).length();const h=Y.set(e[4],e[5],e[6]).length(),n=Y.set(e[8],e[9],e[10]).length();this.determinant()<0&&(r=-r),t.x=e[12],t.y=e[13],t.z=e[14],N.copy(this);const a=1/r,o=1/h,c=1/n;return N.elements[0]*=a,N.elements[1]*=a,N.elements[2]*=a,N.elements[4]*=o,N.elements[5]*=o,N.elements[6]*=o,N.elements[8]*=c,N.elements[9]*=c,N.elements[10]*=c,s.setFromRotationMatrix(N),i.x=r,i.y=h,i.z=n,this}makePerspective(t,s,i,e,r,h){const n=this.elements,a=2*r/(s-t),o=2*r/(i-e),c=(s+t)/(s-t),l=(i+e)/(i-e),u=-(h+r)/(h-r),m=-2*h*r/(h-r);return n[0]=a,n[4]=0,n[8]=c,n[12]=0,n[1]=0,n[5]=o,n[9]=l,n[13]=0,n[2]=0,n[6]=0,n[10]=u,n[14]=m,n[3]=0,n[7]=0,n[11]=-1,n[15]=0,this}makeOrthographic(t,s,i,e,r,h){const n=this.elements,a=1/(s-t),o=1/(i-e),c=1/(h-r),l=(s+t)*a,u=(i+e)*o,m=(h+r)*c;return n[0]=2*a,n[4]=0,n[8]=0,n[12]=-l,n[1]=0,n[5]=2*o,n[9]=0,n[13]=-u,n[2]=0,n[6]=0,n[10]=-2*c,n[14]=-m,n[3]=0,n[7]=0,n[11]=0,n[15]=1,this}equals(t){const s=this.elements,i=t.elements;for(let t=0;t<16;t++)if(s[t]!==i[t])return!1;return!0}fromArray(t,s=0){for(let i=0;i<16;i++)this.elements[i]=t[i+s];return this}toArray(t=[],s=0){const i=this.elements;return t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2],t[s+3]=i[3],t[s+4]=i[4],t[s+5]=i[5],t[s+6]=i[6],t[s+7]=i[7],t[s+8]=i[8],t[s+9]=i[9],t[s+10]=i[10],t[s+11]=i[11],t[s+12]=i[12],t[s+13]=i[13],t[s+14]=i[14],t[s+15]=i[15],t}}const Y=new x,N=new X,Z=new x(0,0,0),H=new x(1,1,1),W=new x,j=new x,Q=new x,$=new X,J=new y;class K{constructor(t=0,s=0,i=0,e=K.DefaultOrder){this.isEuler=!0,this._x=t,this._y=s,this._z=i,this._order=e}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,s,i,e=this._order){return this._x=t,this._y=s,this._z=i,this._order=e,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,s=this._order,i=!0){const e=t.elements,r=e[0],h=e[4],n=e[8],a=e[1],o=e[5],l=e[9],u=e[2],m=e[6],y=e[10];switch(s){case"XYZ":this._y=Math.asin(c(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-l,y),this._z=Math.atan2(-h,r)):(this._x=Math.atan2(m,o),this._z=0);break;case"YXZ":this._x=Math.asin(-c(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(n,y),this._z=Math.atan2(a,o)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(c(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-u,y),this._z=Math.atan2(-h,o)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-c(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(m,y),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-h,o));break;case"YZX":this._z=Math.asin(c(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,o),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(n,y));break;case"XZY":this._z=Math.asin(-c(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,o),this._y=Math.atan2(n,r)):(this._x=Math.atan2(-l,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+s)}return this._order=s,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,s,i){return $.makeRotationFromQuaternion(t),this.setFromRotationMatrix($,s,i)}setFromVector3(t,s=this._order){return this.set(t.x,t.y,t.z,s)}reorder(t){return J.setFromEuler(this),this.setFromQuaternion(J,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],s=0){return t[s]=this._x,t[s+1]=this._y,t[s+2]=this._z,t[s+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}K.DefaultOrder="XYZ",K.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const tt=new x,st=new x;class it{constructor(){it.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,s,i,e,r,h,n,a,o){const c=this.elements;return c[0]=t,c[1]=e,c[2]=n,c[3]=s,c[4]=r,c[5]=a,c[6]=i,c[7]=h,c[8]=o,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const s=this.elements,i=t.elements;return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],this}extractBasis(t,s,i){return t.setFromMatrix3Column(this,0),s.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const s=t.elements;return this.set(s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,s){const i=t.elements,e=s.elements,r=this.elements,h=i[0],n=i[3],a=i[6],o=i[1],c=i[4],l=i[7],u=i[2],m=i[5],y=i[8],x=e[0],d=e[3],p=e[6],g=e[1],M=e[4],_=e[7],w=e[2],z=e[5],b=e[8];return r[0]=h*x+n*g+a*w,r[3]=h*d+n*M+a*z,r[6]=h*p+n*_+a*b,r[1]=o*x+c*g+l*w,r[4]=o*d+c*M+l*z,r[7]=o*p+c*_+l*b,r[2]=u*x+m*g+y*w,r[5]=u*d+m*M+y*z,r[8]=u*p+m*_+y*b,this}multiplyScalar(t){const s=this.elements;return s[0]*=t,s[3]*=t,s[6]*=t,s[1]*=t,s[4]*=t,s[7]*=t,s[2]*=t,s[5]*=t,s[8]*=t,this}determinant(){const t=this.elements,s=t[0],i=t[1],e=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],c=t[8];return s*h*c-s*n*o-i*r*c+i*n*a+e*r*o-e*h*a}invert(){const t=this.elements,s=t[0],i=t[1],e=t[2],r=t[3],h=t[4],n=t[5],a=t[6],o=t[7],c=t[8],l=c*h-n*o,u=n*a-c*r,m=o*r-h*a,y=s*l+i*u+e*m;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);const x=1/y;return t[0]=l*x,t[1]=(e*o-c*i)*x,t[2]=(n*i-e*h)*x,t[3]=u*x,t[4]=(c*s-e*a)*x,t[5]=(e*r-n*s)*x,t[6]=m*x,t[7]=(i*a-o*s)*x,t[8]=(h*s-i*r)*x,this}transpose(){let t;const s=this.elements;return t=s[1],s[1]=s[3],s[3]=t,t=s[2],s[2]=s[6],s[6]=t,t=s[5],s[5]=s[7],s[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const s=this.elements;return t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8],this}setUvTransform(t,s,i,e,r,h,n){const a=Math.cos(r),o=Math.sin(r);return this.set(i*a,i*o,-i*(a*h+o*n)+h+t,-e*o,e*a,-e*(-o*h+a*n)+n+s,0,0,1),this}scale(t,s){return this.premultiply(et.makeScale(t,s)),this}rotate(t){return this.premultiply(et.makeRotation(-t)),this}translate(t,s){return this.premultiply(et.makeTranslation(t,s)),this}makeTranslation(t,s){return this.set(1,0,t,0,1,s,0,0,1),this}makeRotation(t){const s=Math.cos(t),i=Math.sin(t);return this.set(s,-i,0,i,s,0,0,0,1),this}makeScale(t,s){return this.set(t,0,0,0,s,0,0,0,1),this}equals(t){const s=this.elements,i=t.elements;for(let t=0;t<9;t++)if(s[t]!==i[t])return!1;return!0}fromArray(t,s=0){for(let i=0;i<9;i++)this.elements[i]=t[i+s];return this}toArray(t=[],s=0){const i=this.elements;return t[s]=i[0],t[s+1]=i[1],t[s+2]=i[2],t[s+3]=i[3],t[s+4]=i[4],t[s+5]=i[5],t[s+6]=i[6],t[s+7]=i[7],t[s+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const et=new it,rt=new x,ht=new x,nt=new it,at=new x,ot=new x,ct=new x,lt=new x,ut=new x,mt=new x,yt=new x,xt=new M,dt=new x,pt=new x,gt=new x,Mt=new x,_t=new x,wt=new x,zt=new x,bt=new x,St=new x,ft=new x,Ct=new x,Ft=new x,kt=new x;class Tt{constructor(t=new x,s=new x,i=new x){this.a=t,this.b=s,this.c=i}static getNormal(t,s,i,e){e.subVectors(i,s),Mt.subVectors(t,s),e.cross(Mt);const r=e.lengthSq();return r>0?e.multiplyScalar(1/Math.sqrt(r)):e.set(0,0,0)}static getBarycoord(t,s,i,e,r){Mt.subVectors(e,s),_t.subVectors(i,s),wt.subVectors(t,s);const h=Mt.dot(Mt),n=Mt.dot(_t),a=Mt.dot(wt),o=_t.dot(_t),c=_t.dot(wt),l=h*o-n*n;if(0===l)return r.set(-2,-1,-1);const u=1/l,m=(o*a-n*c)*u,y=(h*c-n*a)*u;return r.set(1-m-y,y,m)}static containsPoint(t,s,i,e){return this.getBarycoord(t,s,i,e,zt),zt.x>=0&&zt.y>=0&&zt.x+zt.y<=1}static getUV(t,s,i,e,r,h,n,a){return this.getBarycoord(t,s,i,e,zt),a.set(0,0),a.addScaledVector(r,zt.x),a.addScaledVector(h,zt.y),a.addScaledVector(n,zt.z),a}static isFrontFacing(t,s,i,e){return Mt.subVectors(i,s),_t.subVectors(t,s),Mt.cross(_t).dot(e)<0}set(t,s,i){return this.a.copy(t),this.b.copy(s),this.c.copy(i),this}setFromPointsAndIndices(t,s,i,e){return this.a.copy(t[s]),this.b.copy(t[i]),this.c.copy(t[e]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Mt.subVectors(this.c,this.b),_t.subVectors(this.a,this.b),.5*Mt.cross(_t).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Tt.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,s){return Tt.getBarycoord(t,this.a,this.b,this.c,s)}getUV(t,s,i,e,r){return Tt.getUV(t,this.a,this.b,this.c,s,i,e,r)}containsPoint(t){return Tt.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Tt.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,s){const i=this.a,e=this.b,r=this.c;let h,n;bt.subVectors(e,i),St.subVectors(r,i),Ct.subVectors(t,i);const a=bt.dot(Ct),o=St.dot(Ct);if(a<=0&&o<=0)return s.copy(i);Ft.subVectors(t,e);const c=bt.dot(Ft),l=St.dot(Ft);if(c>=0&&l<=c)return s.copy(e);const u=a*l-c*o;if(u<=0&&a>=0&&c<=0)return h=a/(a-c),s.copy(i).addScaledVector(bt,h);kt.subVectors(t,r);const m=bt.dot(kt),y=St.dot(kt);if(y>=0&&m<=y)return s.copy(r);const x=m*o-a*y;if(x<=0&&o>=0&&y<=0)return n=o/(o-y),s.copy(i).addScaledVector(St,n);const d=c*y-m*l;if(d<=0&&l-c>=0&&m-y>=0)return ft.subVectors(r,e),n=(l-c)/(l-c+(m-y)),s.copy(e).addScaledVector(ft,n);const p=1/(d+x+u);return h=x*p,n=u*p,s.copy(i).addScaledVector(bt,h).addScaledVector(St,n)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}class At{constructor(t=0,s=0,i=0,e=1){At.prototype.isVector4=!0,this.x=t,this.y=s,this.z=i,this.w=e}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,s,i,e){return this.x=t,this.y=s,this.z=i,this.w=e,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,s){switch(t){case 0:this.x=s;break;case 1:this.y=s;break;case 2:this.z=s;break;case 3:this.w=s;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this.z=t.z+s.z,this.w=t.w+s.w,this}addScaledVector(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this.w+=t.w*s,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,s){return this.x=t.x-s.x,this.y=t.y-s.y,this.z=t.z-s.z,this.w=t.w-s.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const s=this.x,i=this.y,e=this.z,r=this.w,h=t.elements;return this.x=h[0]*s+h[4]*i+h[8]*e+h[12]*r,this.y=h[1]*s+h[5]*i+h[9]*e+h[13]*r,this.z=h[2]*s+h[6]*i+h[10]*e+h[14]*r,this.w=h[3]*s+h[7]*i+h[11]*e+h[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const s=Math.sqrt(1-t.w*t.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/s,this.y=t.y/s,this.z=t.z/s),this}setAxisAngleFromRotationMatrix(t){let s,i,e,r;const h=.01,n=.1,a=t.elements,o=a[0],c=a[4],l=a[8],u=a[1],m=a[5],y=a[9],x=a[2],d=a[6],p=a[10];if(Math.abs(c-u)<h&&Math.abs(l-x)<h&&Math.abs(y-d)<h){if(Math.abs(c+u)<n&&Math.abs(l+x)<n&&Math.abs(y+d)<n&&Math.abs(o+m+p-3)<n)return this.set(1,0,0,0),this;s=Math.PI;const t=(o+1)/2,a=(m+1)/2,g=(p+1)/2,M=(c+u)/4,_=(l+x)/4,w=(y+d)/4;return t>a&&t>g?t<h?(i=0,e=.707106781,r=.707106781):(i=Math.sqrt(t),e=M/i,r=_/i):a>g?a<h?(i=.707106781,e=0,r=.707106781):(e=Math.sqrt(a),i=M/e,r=w/e):g<h?(i=.707106781,e=.707106781,r=0):(r=Math.sqrt(g),i=_/r,e=w/r),this.set(i,e,r,s),this}let g=Math.sqrt((d-y)*(d-y)+(l-x)*(l-x)+(u-c)*(u-c));return Math.abs(g)<.001&&(g=1),this.x=(d-y)/g,this.y=(l-x)/g,this.z=(u-c)/g,this.w=Math.acos((o+m+p-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,s){return this.x=Math.max(t.x,Math.min(s.x,this.x)),this.y=Math.max(t.y,Math.min(s.y,this.y)),this.z=Math.max(t.z,Math.min(s.z,this.z)),this.w=Math.max(t.w,Math.min(s.w,this.w)),this}clampScalar(t,s){return this.x=Math.max(t,Math.min(s,this.x)),this.y=Math.max(t,Math.min(s,this.y)),this.z=Math.max(t,Math.min(s,this.z)),this.w=Math.max(t,Math.min(s,this.w)),this}clampLength(t,s){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(s,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,s){return this.x+=(t.x-this.x)*s,this.y+=(t.y-this.y)*s,this.z+=(t.z-this.z)*s,this.w+=(t.w-this.w)*s,this}lerpVectors(t,s,i){return this.x=t.x+(s.x-t.x)*i,this.y=t.y+(s.y-t.y)*i,this.z=t.z+(s.z-t.z)*i,this.w=t.w+(s.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,s=0){return this.x=t[s],this.y=t[s+1],this.z=t[s+2],this.w=t[s+3],this}toArray(t=[],s=0){return t[s]=this.x,t[s+1]=this.y,t[s+2]=this.z,t[s+3]=this.w,t}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}s.ACESFilmicToneMapping=4,s.AddEquation=100,s.AddOperation=2,s.AdditiveAnimationBlendMode=2501,s.AdditiveBlending=2,s.AlphaFormat=1021,s.AlwaysDepth=1,s.AlwaysStencilFunc=519,s.BackSide=1,s.BasicDepthPacking=3200,s.BasicShadowMap=0,s.Box2=class{constructor(t=new r(1/0,1/0),s=new r(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=s}set(t,s){return this.min.copy(t),this.max.copy(s),this}setFromPoints(t){this.makeEmpty();for(let s=0,i=t.length;s<i;s++)this.expandByPoint(t[s]);return this}setFromCenterAndSize(t,s){const i=g.copy(s).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t=new r){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t=new r){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,s){return s.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,s){return s.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return g.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},s.Box3=M,s.ByteType=1010,s.CineonToneMapping=3,s.ClampToEdgeWrapping=1001,s.Color=U,s.ColorManagement=E,s.CubeReflectionMapping=301,s.CubeRefractionMapping=302,s.CubeUVReflectionMapping=306,s.CullFaceBack=1,s.CullFaceFront=2,s.CullFaceFrontBack=3,s.CullFaceNone=0,s.CustomBlending=5,s.CustomToneMapping=5,s.Cylindrical=class{constructor(t=1,s=0,i=0){return this.radius=t,this.theta=s,this.y=i,this}set(t,s,i){return this.radius=t,this.theta=s,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,s,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=s,this}clone(){return(new this.constructor).copy(this)}},s.DecrementStencilOp=7683,s.DecrementWrapStencilOp=34056,s.DepthFormat=1026,s.DepthStencilFormat=1027,s.DoubleSide=2,s.DstAlphaFactor=206,s.DstColorFactor=208,s.DynamicCopyUsage=35050,s.DynamicDrawUsage=35048,s.DynamicReadUsage=35049,s.EqualDepth=4,s.EqualStencilFunc=514,s.EquirectangularReflectionMapping=303,s.EquirectangularRefractionMapping=304,s.Euler=K,s.FloatType=1015,s.FrontSide=0,s.GLSL1="100",s.GLSL3="300 es",s.GreaterDepth=6,s.GreaterEqualDepth=5,s.GreaterEqualStencilFunc=518,s.GreaterStencilFunc=516,s.HalfFloatType=1016,s.IncrementStencilOp=7682,s.IncrementWrapStencilOp=34055,s.IntType=1013,s.Interpolant=class{constructor(t,s,i,e){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==e?e:new s.constructor(i),this.sampleValues=s,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const s=this.parameterPositions;let i=this._cachedIndex,e=s[i],r=s[i-1];t:{s:{let h;i:{e:if(!(t<e)){for(let h=i+2;;){if(void 0===e){if(t<r)break e;return i=s.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===h)break;if(r=e,e=s[++i],t<e)break s}h=s.length;break i}if(t>=r)break t;{const n=s[1];t<n&&(i=2,r=n);for(let h=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===h)break;if(e=r,r=s[--i-1],t>=r)break s}h=i,i=0}}for(;i<h;){const e=i+h>>>1;t<s[e]?h=e:i=e+1}if(e=s[i],r=s[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===e)return i=s.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,e)}return this.interpolate_(i,r,t,e)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const s=this.resultBuffer,i=this.sampleValues,e=this.valueSize,r=t*e;for(let t=0;t!==e;++t)s[t]=i[r+t];return s}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},s.InterpolateDiscrete=2300,s.InterpolateLinear=2301,s.InterpolateSmooth=2302,s.InvertStencilOp=5386,s.KeepStencilOp=7680,s.LessDepth=2,s.LessEqualDepth=3,s.LessEqualStencilFunc=515,s.LessStencilFunc=513,s.Line3=class{constructor(t=new x,s=new x){this.start=t,this.end=s}set(t,s){return this.start.copy(t),this.end.copy(s),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,s){return this.delta(s).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,s){tt.subVectors(t,this.start),st.subVectors(this.end,this.start);const i=st.dot(st);let e=st.dot(tt)/i;return s&&(e=c(e,0,1)),e}closestPointToPoint(t,s,i){const e=this.closestPointToPointParameter(t,s);return this.delta(i).multiplyScalar(e).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},s.LinearEncoding=3e3,s.LinearFilter=1006,s.LinearMipMapLinearFilter=1008,s.LinearMipMapNearestFilter=1007,s.LinearMipmapLinearFilter=1008,s.LinearMipmapNearestFilter=1007,s.LinearSRGBColorSpace=e,s.LinearToSRGB=B,s.LinearToneMapping=1,s.LoopOnce=2200,s.LoopPingPong=2202,s.LoopRepeat=2201,s.LuminanceAlphaFormat=1025,s.LuminanceFormat=1024,s.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s.MathUtils=m,s.Matrix3=it,s.Matrix4=X,s.MaxEquation=104,s.MinEquation=103,s.MirroredRepeatWrapping=1002,s.MixOperation=1,s.MultiplyBlending=4,s.MultiplyOperation=0,s.NearestFilter=1003,s.NearestMipMapLinearFilter=1005,s.NearestMipMapNearestFilter=1004,s.NearestMipmapLinearFilter=1005,s.NearestMipmapNearestFilter=1004,s.NeverDepth=0,s.NeverStencilFunc=512,s.NoBlending=0,s.NoColorSpace="",s.NoToneMapping=0,s.NormalAnimationBlendMode=2500,s.NormalBlending=1,s.NotEqualDepth=7,s.NotEqualStencilFunc=517,s.ObjectSpaceNormalMap=1,s.OneFactor=201,s.OneMinusDstAlphaFactor=207,s.OneMinusDstColorFactor=209,s.OneMinusSrcAlphaFactor=205,s.OneMinusSrcColorFactor=203,s.PCFShadowMap=1,s.PCFSoftShadowMap=2,s.Plane=class{constructor(t=new x(1,0,0),s=0){this.isPlane=!0,this.normal=t,this.constant=s}set(t,s){return this.normal.copy(t),this.constant=s,this}setComponents(t,s,i,e){return this.normal.set(t,s,i),this.constant=e,this}setFromNormalAndCoplanarPoint(t,s){return this.normal.copy(t),this.constant=-s.dot(this.normal),this}setFromCoplanarPoints(t,s,i){const e=rt.subVectors(i,s).cross(ht.subVectors(t,s)).normalize();return this.setFromNormalAndCoplanarPoint(e,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,s){return s.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,s){const i=t.delta(rt),e=this.normal.dot(i);if(0===e)return 0===this.distanceToPoint(t.start)?s.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/e;return r<0||r>1?null:s.copy(i).multiplyScalar(r).add(t.start)}intersectsLine(t){const s=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return s<0&&i>0||i<0&&s>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,s){const i=s||nt.getNormalMatrix(t),e=this.coplanarPoint(rt).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-e.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}},s.Quaternion=y,s.REVISION="144dev",s.RGBADepthPacking=3201,s.RGBAFormat=1023,s.RGBAIntegerFormat=1033,s.RGBA_ASTC_10x10_Format=37819,s.RGBA_ASTC_10x5_Format=37816,s.RGBA_ASTC_10x6_Format=37817,s.RGBA_ASTC_10x8_Format=37818,s.RGBA_ASTC_12x10_Format=37820,s.RGBA_ASTC_12x12_Format=37821,s.RGBA_ASTC_4x4_Format=37808,s.RGBA_ASTC_5x4_Format=37809,s.RGBA_ASTC_5x5_Format=37810,s.RGBA_ASTC_6x5_Format=37811,s.RGBA_ASTC_6x6_Format=37812,s.RGBA_ASTC_8x5_Format=37813,s.RGBA_ASTC_8x6_Format=37814,s.RGBA_ASTC_8x8_Format=37815,s.RGBA_BPTC_Format=36492,s.RGBA_ETC2_EAC_Format=37496,s.RGBA_PVRTC_2BPPV1_Format=35843,s.RGBA_PVRTC_4BPPV1_Format=35842,s.RGBA_S3TC_DXT1_Format=33777,s.RGBA_S3TC_DXT3_Format=33778,s.RGBA_S3TC_DXT5_Format=33779,s.RGBFormat=1022,s.RGB_ETC1_Format=36196,s.RGB_ETC2_Format=37492,s.RGB_PVRTC_2BPPV1_Format=35841,s.RGB_PVRTC_4BPPV1_Format=35840,s.RGB_S3TC_DXT1_Format=33776,s.RGFormat=1030,s.RGIntegerFormat=1031,s.Ray=class{constructor(t=new x,s=new x(0,0,-1)){this.origin=t,this.direction=s}set(t,s){return this.origin.copy(t),this.direction.copy(s),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,s=new x){return s.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,at)),this}closestPointToPoint(t,s=new x){s.subVectors(t,this.origin);const i=s.dot(this.direction);return i<0?s.copy(this.origin):s.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const s=at.subVectors(t,this.origin).dot(this.direction);return s<0?this.origin.distanceToSquared(t):(at.copy(this.direction).multiplyScalar(s).add(this.origin),at.distanceToSquared(t))}distanceSqToSegment(t,s,i,e){ot.copy(t).add(s).multiplyScalar(.5),ct.copy(s).sub(t).normalize(),lt.copy(this.origin).sub(ot);const r=.5*t.distanceTo(s),h=-this.direction.dot(ct),n=lt.dot(this.direction),a=-lt.dot(ct),o=lt.lengthSq(),c=Math.abs(1-h*h);let l,u,m,y;if(c>0)if(l=h*a-n,u=h*n-a,y=r*c,l>=0)if(u>=-y)if(u<=y){const t=1/c;l*=t,u*=t,m=l*(l+h*u+2*n)+u*(h*l+u+2*a)+o}else u=r,l=Math.max(0,-(h*u+n)),m=-l*l+u*(u+2*a)+o;else u=-r,l=Math.max(0,-(h*u+n)),m=-l*l+u*(u+2*a)+o;else u<=-y?(l=Math.max(0,-(-h*r+n)),u=l>0?-r:Math.min(Math.max(-r,-a),r),m=-l*l+u*(u+2*a)+o):u<=y?(l=0,u=Math.min(Math.max(-r,-a),r),m=u*(u+2*a)+o):(l=Math.max(0,-(h*r+n)),u=l>0?r:Math.min(Math.max(-r,-a),r),m=-l*l+u*(u+2*a)+o);else u=h>0?-r:r,l=Math.max(0,-(h*u+n)),m=-l*l+u*(u+2*a)+o;return i&&i.copy(this.direction).multiplyScalar(l).add(this.origin),e&&e.copy(ct).multiplyScalar(u).add(ot),m}intersectSphere(t,s=new x){at.subVectors(t.center,this.origin);const i=at.dot(this.direction),e=at.dot(at)-i*i,r=t.radius*t.radius;if(e>r)return null;const h=Math.sqrt(r-e),n=i-h,a=i+h;return n<0&&a<0?null:n<0?this.at(a,s):this.at(n,s)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const s=t.normal.dot(this.direction);if(0===s)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/s;return i>=0?i:null}intersectPlane(t,s){const i=this.distanceToPlane(t);return null===i?null:this.at(i,s)}intersectsPlane(t){const s=t.distanceToPoint(this.origin);return 0===s||t.normal.dot(this.direction)*s<0}intersectBox(t,s){let i,e,r,h,n,a;const o=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,u=this.origin;return o>=0?(i=(t.min.x-u.x)*o,e=(t.max.x-u.x)*o):(i=(t.max.x-u.x)*o,e=(t.min.x-u.x)*o),c>=0?(r=(t.min.y-u.y)*c,h=(t.max.y-u.y)*c):(r=(t.max.y-u.y)*c,h=(t.min.y-u.y)*c),i>h||r>e?null:((r>i||i!=i)&&(i=r),(h<e||e!=e)&&(e=h),l>=0?(n=(t.min.z-u.z)*l,a=(t.max.z-u.z)*l):(n=(t.max.z-u.z)*l,a=(t.min.z-u.z)*l),i>a||n>e?null:((n>i||i!=i)&&(i=n),(a<e||e!=e)&&(e=a),e<0?null:this.at(i>=0?i:e,s)))}intersectsBox(t){return null!==this.intersectBox(t,at)}intersectTriangle(t,s,i,e,r){ut.subVectors(s,t),mt.subVectors(i,t),yt.crossVectors(ut,mt);let h,n=this.direction.dot(yt);if(n>0){if(e)return null;h=1}else{if(!(n<0))return null;h=-1,n=-n}lt.subVectors(this.origin,t);const a=h*this.direction.dot(mt.crossVectors(lt,mt));if(a<0)return null;const o=h*this.direction.dot(ut.cross(lt));if(o<0)return null;if(a+o>n)return null;const c=-h*lt.dot(yt);return c<0?null:this.at(c/n,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}},s.RedFormat=1028,s.RedIntegerFormat=1029,s.ReinhardToneMapping=2,s.RepeatWrapping=1e3,s.ReplaceStencilOp=7681,s.ReverseSubtractEquation=102,s.SRGBColorSpace=i,s.SRGBToLinear=V,s.ShortType=1011,s.Sphere=class{constructor(t=new x,s=-1){this.center=t,this.radius=s}set(t,s){return this.center.copy(t),this.radius=s,this}setFromPoints(t,s){const i=this.center;void 0!==s?i.copy(s):xt.setFromPoints(t).getCenter(i);let e=0;for(let s=0,r=t.length;s<r;s++)e=Math.max(e,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(e),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const s=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=s*s}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,s){const i=this.center.distanceToSquared(t);return s.copy(t),i>this.radius*this.radius&&(s.sub(this.center).normalize(),s.multiplyScalar(this.radius).add(this.center)),s}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;gt.subVectors(t,this.center);const s=gt.lengthSq();if(s>this.radius*this.radius){const t=Math.sqrt(s),i=.5*(t-this.radius);this.center.add(gt.multiplyScalar(i/t)),this.radius+=i}return this}union(t){if(!t.isEmpty())return this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?pt.set(0,0,1).multiplyScalar(t.radius):pt.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(dt.copy(t.center).add(pt)),this.expandByPoint(dt.copy(t.center).sub(pt)),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}},s.Spherical=class{constructor(t=1,s=0,i=0){return this.radius=t,this.phi=s,this.theta=i,this}set(t,s,i){return this.radius=t,this.phi=s,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,s,i){return this.radius=Math.sqrt(t*t+s*s+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(c(s/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},s.SrcAlphaFactor=204,s.SrcAlphaSaturateFactor=210,s.SrcColorFactor=202,s.StaticCopyUsage=35046,s.StaticDrawUsage=35044,s.StaticReadUsage=35045,s.StreamCopyUsage=35042,s.StreamDrawUsage=35040,s.StreamReadUsage=35041,s.SubtractEquation=101,s.SubtractiveBlending=3,s.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},s.TangentSpaceNormalMap=0,s.Triangle=Tt,s.TriangleFanDrawMode=2,s.TriangleStripDrawMode=1,s.TrianglesDrawMode=0,s.UVMapping=300,s.UnsignedByteType=1009,s.UnsignedInt248Type=1020,s.UnsignedIntType=1014,s.UnsignedShort4444Type=1017,s.UnsignedShort5551Type=1018,s.UnsignedShortType=1012,s.VSMShadowMap=3,s.Vector2=r,s.Vector3=x,s.Vector4=At,s.WrapAroundEnding=2402,s.ZeroCurvatureEnding=2400,s.ZeroFactor=200,s.ZeroSlopeEnding=2401,s.ZeroStencilOp=0,s._SRGBAFormat=1035,s.sRGBEncoding=3001}},s={};const e=function i(e){var r=s[e];if(void 0!==r)return r.exports;var h=s[e]={exports:{}};return t[e](h,h.exports,i),h.exports}(368);let r,h,n={};n.pos=new e.threeJsMod.Vector2(0,0);let a=!1,o=[];const c={CreateScene(){let t=new e.gameObject(0,new Image),s=new e.gameObject(1,new Image),i=new e.gameObject(2,new Image),r=new Image(800,800),h=new Image,n=new Image;r.src="../public/images/paper.png",h.src="../public/images/scissors.png",n.src="../public/images/rock.png",t=new e.gameObject,t.transform.translate(-600,200),s=new e.gameObject,s.transform.translate(0,-200),i=new e.gameObject,t.id=0,t.image=n,s.id=1,s.image=h,i.id=2,i.image=r,o.push(t),o.push(s),o.push(i)},DrawScene(){for(let t=0;t>o.length;t++)l(o[t].Image,o[t].x,o[t].y)},UI(){let t=new e.UI_Square(240,500,150,150),s=new e.UI_Square(440,500,150,150),i=new e.UI_Square(640,500,150,150),r=new Image;r.src="../public/images/smallpaper.png";let n=new Image;n.src;let a=new Image;a.src,u(t),h.drawImage(r,276,530),u(s),h.drawImage(n,476,530),u(i),h.drawImage(a,674,530)},gameScene(){},ClearScene(){}};function l(t,s,i){h.drawImage(t,s,i)}function u(t){h.fillRect(t.x,t.y,t.width,t.height),h.clearRect(t.x+5,t.y+5,t.width-10,t.height-10)}r=document.getElementById("viewport"),h=r.getContext("2d"),a=!0,c.CreateScene(),!0===a&&window.setInterval((function t(s){c.gameScene(),c.DrawScene(),c.UI(),c.ClearScene(),1==a&&window.setInterval(t,1e3/60)}),1e3/60),r.addEventListener("click",(t=>{n.pos.x=t.clientX,n.pos.y=t.clientY,console.log("X and Y position of Mouse click:"+n.pos.x+","+n.pos.y)})),document.addEventListener("keyup",(t=>{console.log(t.key+":button was pressed")}))})();